<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta name="viewport" content="width=device-width; height=device-height; user-scalable=no"/>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Beer Me</title>
    <link rel="stylesheet" href="master.css" type="text/css" media="screen"/>
    <script type="text/javascript" src="phonegap-1.3.0.js"></script>
    <script type="text/javascript" charset="utf-8">

        // Wait for PhoneGap to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);

        // PhoneGap is ready
        //
        function onDeviceReady() {
            navigator.geolocation.getCurrentPosition(onSuccess, onError);
        }


        // onSuccess Geolocation
        //
        function onSuccess(position) {
            var element = document.getElementById('geolocation');
            element.innerHTML = 'Latitude: ' + position.coords.latitude + '<br />' +
                    'Longitude: ' + position.coords.longitude + '<br />' +
                    'Altitude: ' + position.coords.altitude + '<br />' +
                    'Accuracy: ' + position.coords.accuracy + '<br />' +
                    'Altitude Accuracy: ' + position.coords.altitudeAccuracy + '<br />' +
                    'Heading: ' + position.coords.heading + '<br />' +
                    'Speed: ' + position.coords.speed + '<br />' +
                    'Timestamp: ' + new Date(position.timestamp) + '<br />';
            run();
        }

        function run() {
            var win = function (position) {
                // Grab coordinates object from the Position object passed into success callback.
                var coords = position.coords;
                // Call for static google maps data - make sure you use your own Google Maps API key!
                var url = "http://maps.google.com/maps/api/staticmap?center=" + coords.latitude + "," + coords.longitude + "&zoom=13&size=320x480&maptype=roadmap&key=zaSyAvc3-RAsDMqSxgh0os_6S4DsuJdSSdGwo&sensor=true";
                document.getElementById('map').setAttribute('src', url);
            };
            var fail = function (e) {
                alert('Can\'t retrieve position.\nError: ' + e);
            };
            navigator.geolocation.getCurrentPosition(win, fail);
        }

        // onError Callback receives a PositionError object
        //
        function onError(error) {
            alert('code: ' + error.code + '\n' +
                    'message: ' + error.message + '\n');
        }

    </script>
</head>
<body>
<h2>Dive Weather</h2>

<p id="geolocation">Finding geolocation...</p>
</body>
</html>